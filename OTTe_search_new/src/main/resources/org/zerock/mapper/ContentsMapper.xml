<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zerock.mapper.ContentsMapper">


	<!-- id 속성은 DAO 의 메소드와 같아야 한다. 여기의 boardVO 는 mybatis-confg.xml 에 Alias 되어 
		있습니다. -->
	<select id="selectTopOrder"
		resultType="org.zerock.domain.ContentsVO">
			<![CDATA[select c.contentsid, n.nationname, o.ottname, g.gradename, cl.classname, c.contentstitle, c.contentssummary, c.contentsstart, c.contentsseason, c.contentsepisode, c.contentsscore, c.contentsduration, c.imgname
from contents_t c, ott o, nation_t n, grade_t g, class_t cl
where c.ottid = o.ottid and n.nationcode=c.nationcode and g.gradeid=c.gradeid and cl.classid=c.classid
order by c.CONTENTSSCORE DESC]]>

	</select>

	<select id="selectKoreanOrder"
		resultType="org.zerock.domain.ContentsVO">
			<![CDATA[select c.contentsid, n.nationname, o.ottname, g.gradename, cl.classname, c.contentstitle, c.contentssummary, c.contentsstart, c.contentsseason, c.contentsepisode, c.contentsscore, c.contentsduration, c.imgname
from contents_t c, ott o, nation_t n, grade_t g, class_t cl
where c.NATIONCODE='KR'and c.ottid = o.ottid and n.nationcode=c.nationcode and g.gradeid=c.gradeid and cl.classid=c.classid
order by c.contentsid]]>

	</select>

	<select id="selectLatestOrder"
		resultType="org.zerock.domain.ContentsVO">
			<![CDATA[select c.contentsid, n.nationname, o.ottname, g.gradename, cl.classname, c.contentstitle, c.contentssummary, c.contentsstart, c.contentsseason, c.contentsepisode, c.contentsscore, c.contentsduration, c.imgname
from contents_t c, ott o, nation_t n, grade_t g, class_t cl
where c.ottid = o.ottid and n.nationcode=c.nationcode and g.gradeid=c.gradeid and cl.classid=c.classid
ORDER BY CONTENTSSTART DESC]]>
	</select>

	<select id="view" resultType="org.zerock.domain.ContentsVO">
		<![CDATA[select c.contentsid, n.nationname, o.ottname, g.gradename, cl.classname, c.contentstitle, c.contentssummary, c.contentsstart, c.contentsseason, c.contentsepisode, c.contentsscore, c.contentsduration, c.imgname
from contents_t c, ott o, nation_t n, grade_t g, class_t cl
where c.ottid = o.ottid and n.nationcode=c.nationcode and g.gradeid=c.gradeid and cl.classid=c.classid and CONTENTSID = #{CONTENTSID}
order by c.contentsid]]>
	</select>

	<select id="selectSearch"
		resultType="org.zerock.domain.ContentsVO">
		<![CDATA[SELECT DISTINCT contentsid, nationcode, ottname, gradename, classname, contentstitle, contentssummary, contentsstart, contentsseason, contentsepisode, contentsscore, contentsduration, imgname
			     FROM(select  c.contentsid, n.nationcode, o.ottname, g.gradename, cl.classname, c.contentstitle, c.contentssummary, c.contentsstart, c.contentsseason, c.contentsepisode, c.contentsscore, c.contentsduration, c.imgname, A.ACTORNAME
            		  from contents_t c, ott o, nation_t n, grade_t g, class_t cl, ACTORJOIN AJ, ACTOR_T A
            		  where c.ottid = o.ottid and n.nationcode=c.nationcode and g.gradeid=c.gradeid and cl.classid=c.classid AND aj.CONTENTSID=C.CONTENTSID AND AJ.ACTORID=A.ACTORID)
			 	 WHERE CONTENTSTITLE LIKE '%'||#{keyword}||'%' OR ACTORNAME LIKE '%'||#{keyword}||'%']]>
		
		
		

	</select>
	
		<select id="selectWishlist"
		resultType="org.zerock.domain.ContentsVO">
		<![CDATA[select c.contentsid, n.nationname, o.ottname, g.gradename, cl.classname, c.contentstitle, c.contentssummary, c.contentsstart, c.contentsseason, c.contentsepisode, c.contentsscore, c.contentsduration, c.imgname
from contents_t c, ott o, nation_t n, grade_t g, class_t cl, wish w
where c.ottid = o.ottid and n.nationcode=c.nationcode and g.gradeid=c.gradeid and cl.classid=c.classid and w.contentsid=c.contentsid and w.usernum= #{usernum}
order by w.wishdate asc]]>

	</select>
</mapper>
